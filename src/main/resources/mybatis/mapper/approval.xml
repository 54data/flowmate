<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sailing.flowmate.dao.ApprovalDao">
	<select id="selectApprNewNo" resultType="int">
		select approval_seq.nextval
		from dual
	</select>
	
	<insert id="insertApprData" parameterType="Approval">
		insert into approval (
			approval_id, task_id, project_id, requester_id, responder_id,
			approval_state, approval_message, approval_request_date
		) values (
			#{approvalId}, #{taskId}, #{projectId}, #{requesterId}, 
			#{responderId}, #{approvalState}, #{approvalMessage}, to_char(sysdate, 'yyyymmddhh24miss')
		)
	</insert>
	
	<select id="getApprovalList" parameterType="String" resultType="Approval">
		select
			approval_id, task_id, project_id, requester_id, responder_id,
			approval_state, approval_message, approval_request_date,
			approval_denied_message, approval_response_date, approval_response_result
		from
			approval
		where project_id = #{projectId}						
	</select>

</mapper> 